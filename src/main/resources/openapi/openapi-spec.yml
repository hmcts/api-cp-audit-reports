openapi: 3.1.0
servers:
  - description: APIHub Audit Reports API
    url: https://virtserver.swaggerhub.com/HMCTS-DTS/api-cp-audit-reports/0.0.0

info:
  title: Audit Reports API
  description: API for requesting and retrieving audit reports
  version: 0.0.0
  contact:
    email: no-reply@hmcts.com
  license:
    name: MIT
    url: 'https://opensource.org/licenses/MIT'

paths:
  /:
    get:
      description: Root endpoint
      operationId: getRoot
      tags:
        - root
      responses:
        '200':
          description: OK
          content:
            text/plain:
              schema:
                type: string
                example: Hello
  /case/id:
    get:
      summary: Get Case URN by Case ID
      tags:
        - case-mapping
      description: Retrieves the Case URNs associated with the provided Case ID(s).
      operationId: getCaseUrns
      parameters:
        - description: Case IDs (comma separated)
          in: query
          name: caseIds
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Case URN(s) found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseIdMapper'
        '404':
          description: Case URN(s) not found for the given ID(s)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'


  /case/urn:
    get:
      summary: Get Case ID by Case URN
      tags:
        - case-mapping
      description: Retrieves the Case IDs associated with the provided Case URN(s).
      operationId: getCaseIds
      parameters:
        - description: Case URNs (comma separated)
          in: query
          name: caseUrns
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Case ID(s) found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseIdMapper'
        '404':
          description: Case ID(s) not found for the given URN(s)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /material/id:
    get:
      summary: Get Case IDs for Material IDs
      tags:
        - material-mapping
      description: Retrieves Case IDs associated with the provided material IDs.
      operationId: getCaseIdsForMaterialIds
      parameters:
        - description: Material IDs (comma separated)
          in: query
          name: materialIds
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Material cases found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MaterialCase'
        '404':
          description: No material cases found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /user/email:
    get:
      summary: Get User IDs by Email addreses
      tags:
        - user-mapping
      description: Retrieves User IDs associated with the provided email addresses.
      operationId: getUserIds
      parameters:
        - description: Email addresses of the users (comma separated)
          in: query
          name: emails
          required: true
          schema:
            type: string
        - description: Correlation ID for tracking the request
          in: header
          name: CPPCLIENTCORRELATIONID
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Users found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '404':
          description: No users found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /user/id:
    get:
      summary: Get User Emails by User IDs
      tags:
        - user-mapping
      description: Retrieves the user emails associated with the provided User IDs.
      operationId: getUserEmails
      parameters:
        - description: User IDs of the users (comma separated)
          in: query
          name: userIds
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Users found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '404':
          description: No users found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'


components:
  schemas:
    CaseIdMapper:
      type: object
      properties:
        caseId:
          type: string
        caseUrn:
          type: string
        targetType:
          type: string
    MaterialCase:
      type: object
      properties:
        caseId:
          type: string
        caseUrn:
          type: string
        courtDocumentId:
          type: string
        materialId:
          type: string
    User:
      type: object
      properties:
        email:
          type: string
        firstName:
          type: string
        lastName:
          type: string
        userId:
          type: string

    ErrorResponse:
      type: object
      required: [error, message, timestamp, traceId]
      properties:
        error:
          type: string
          description: Numeric HTTP status code as a string (e.g. "400", "404", "500").
          example: "404"
        message:
          type: string
          description: Human-readable error description.
          example: "Resource not found."
        timestamp:
          type: string
          format: date-time
          description: UTC timestamp when the error was created.
        traceId:
          type: string
          description: Unique identifier for tracing requests.
          example: "a1b2c3d4e5f6g7h8"
